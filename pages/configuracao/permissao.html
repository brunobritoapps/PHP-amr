<style type="text/css">    td, th{        text-align: center;    }        .nivel1{        font-weight: bold !important;    }    .nivel3{         font-style: italic;    }</style><script type="text/javascript">    var remote = new Remote('php/comunicacao.php', 'acesso', 'usuario_permissao');    var oTable;    var defTable;    var verificador=0;    function resultGetContas(dados) {        $("#selConta").html('<option value="">Selecione a Conta</option>');        for (var i = 0; i < dados.length; i++) {            $("#selConta").append('<option value="' + dados[i].id + '" data-nome="' + dados[i].nome + '">' + dados[i].nome + '</option>');        }        $("#selConta").selectpicker("refresh");        $("#divResul2").hide();    }    function resultSetNovaConta(dados) {        $("#selConta").append('<option value="' + dados.id + '" data-nome="' + dados.nome + '">' + dados.nome + '</option>');        $("#selConta").val(dados.id);        $("#selConta").selectpicker("refresh");        $("#selConta").change();    }    function resultGetPermissoesConta(dados) {        if(verificador==1){            if(dados.length>0){                $("#divResul2").hide("fast");                noty({                    text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Sucesso</font></p></b><p>Parâmetrização de conta concluída com sucesso</p>',                    type: 'success',                    layout: 'topCenter',                    timeout: 4000                });            }else{                noty({                    text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Erro</font></p></b><p>Erro ao gravar alterações em conta</p>',                    type: 'error',                    layout: 'topCenter',                    timeout: 4000                });            }            // $("[data-controle]").prop('checked', false);            // for (var i = 0; i < dados[0].length; i++) {            //     $("[data-controle='" + dados[0][i] + "']").prop('checked', true);            // }        }        $("#selPaginas").val(dados[1]);        $("#selPaginas").selectpicker("refresh");    }    $(document).ready(function () {        remote.executa("getContas", null, resultGetContas, $('#divOpcoes .panel'), erroPersonalizado);        $("#btnNovaConta").on('click', function () {            $("#modal_conta").modal({autoClose: false});        });        $("#btnSanvaConta").on('click', function () {            var parametros = {                nome: $("#txtNome").val(),            };            remote.executa("setNovaConta", parametros, resultSetNovaConta, $('#modal_conta .modal-body'));        });        $("#btnSalvaPermissoes").on('click', function () {            verificador=1;            // var arrPermissoes = new Array();            // $("[data-controle]:checked").each(function (idx, obj) {            //     arrPermissoes.push($(obj).attr("data-controle"));            // });            // remote.executa("setPermissoes", {conta: $("#selConta").val(), servicos: arrPermissoes, paginas: $("#selPaginas").val()}, resultGetPermissoesConta, $('#divResul2'), erroPersonalizado);            remote.executa("setPermissoes", {conta: $("#selConta").val(), paginas: $("#selPaginas").val()}, resultGetPermissoesConta, $('#divResul2'), erroPersonalizado);        });        $("#selConta").on('change', function () {            verificador =2;            $("#divResul2 .panel-title").html("Conta: " + $("#selConta option:selected").attr("data-nome"));            $("#divResul2").show("fast");            remote.executa("getPermissoesConta", {conta: $("#selConta").val()}, resultGetPermissoesConta, $('#divResul2'));        });                for (var i = 0; i < menu.estruturaMenu.length; i++) {            if ((menu.estruturaMenu[i].nivel == 1 || menu.estruturaMenu[i].nivel == 4) && menu.estruturaMenu[i].pai == null) {                $("#selPaginas").append('<option class="nivel1" value="'+menu.estruturaMenu[i].id+'">'+menu.estruturaMenu[i].nome+'</option><option data-divider="true" data-id-menu="'+menu.estruturaMenu[i].id+'"></option>')            }else if ((menu.estruturaMenu[i].nivel == 2 || menu.estruturaMenu[i].nivel == 5)){                $('<option data-id-menu="'+menu.estruturaMenu[i].id+'" value="'+menu.estruturaMenu[i].id+'" class="nivel2">'+menu.estruturaMenu[i].nome+'</option>').insertBefore("[data-id-menu='"+menu.estruturaMenu[i].pai+"']");            }else{                $('<option data-id-menu="'+menu.estruturaMenu[i].id+'" value="'+menu.estruturaMenu[i].id+'" class="nivel3">->'+menu.estruturaMenu[i].nome+'</option>').insertAfter("[data-id-menu='"+menu.estruturaMenu[i].pai+"']");            }        }        $("#selPaginas").selectpicker("refresh");    });</script><!-- START BREADCRUMB --><ul class="breadcrumb"></ul><!-- END BREADCRUMB --><!-- PAGE CONTENT WRAPPER --><div class="page-content-wrap">    <div class="row">        <div class="col-md-6 col-md-offset-3" id="divResul">                        <div class="panel panel-default">                <div class="panel-heading">                    <h3 class="panel-title">Permissões</h3>                </div>                <div class="panel-body">                    <div id="divPadrao" class="row">                        <div class="col-md-12">                            <div class="row">                                <div class="form-group">                                    <label class="control-label">Conta:</label>                                    <select id="selConta" class="form-control" data-live-search="true">                                        <option value="">Selecione a Conta</option>                                    </select>                                </div>                            </div>                        </div>                    </div>                </div>                <div class="panel-footer">                    <button id="btnNovaConta" class="btn btn-success pull-right"><span class="fa fa-plus"></span>Nova Conta</button>                </div>            </div>        </div>    </div>    <div class="row">        <div class="col-md-6 col-md-offset-3" id="divResul2" style="display: none;">            <div class="panel panel-default">                <div class="panel-heading">                    <h3 class="panel-title"></h3>                                    </div>                <div class="panel-body">                    <table class="col-md-6 table table-bordered">                        <thead>                            <tr>                                <th style="width: 15%"></th>                                <th>Paginas</th>                            </tr>                        </thead>                        <tbody>                            <tr>                                <td>Portal América</td>                                <td>                                    <select id="selPaginas" class="selectpicker col-md-12" multiple data-selected-text-format="count">                                    </select>                                </td>                            </tr>                        </tbody>                    </table>                </div>                <div class="panel-footer">                    <button id="btnSalvaPermissoes" type="button" class="btn btn-primary">Gravar</button>                                        </div>            </div>        </div>    </div></div><div class="modal" id="modal_small" tabindex="-1" role="dialog" aria-hidden="true">    <div class="modal-dialog modal-sm">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title" id="defModalHead">Confirmação</h4>            </div>            <div class="modal-body">                Você tem certeza que deseja remover esse registro?            </div>            <div class="modal-footer">                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>                                        <button id="btnRemConf" type="button" class="btn btn-primary" data-dismiss="modal">Sim</button>                                    </div>        </div>    </div></div><div class="modal" id="modal_conta" tabindex="-1" role="dialog" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title" id="defModalHead1">Nova conta</h4>            </div>            <div class="modal-body">                <div class="row">                    <div class="col-md-12">                        <div class="form-group">                            <label>Nome</label>                            <input id="txtNome" type="text" class="form-control">                        </div>                    </div>                </div>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>                                        <button id="btnSanvaConta" type="button" class="btn btn-success" data-dismiss="modal">Salvar</button>                                    </div>        </div>    </div></div>